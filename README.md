# Data API - REST Сервис аналитики
Это файл README, который предоставляет информацию о проекте Data API. Он включает описание контроллеров и их конечных точек в проекте.

## Описание проекта
Сервис предоставляет следующие возможности:

* Предоставление аналитической информации по списку брендов и артикулов.

## Контроллеры
Для авторизации необходимо использовать заголовок Authorization со значением в формате Bearer XXX, где XXX ключ пользователя.

Проект включает следующие контроллеры, отвечающие за обработку определенных конечных точек и соответствующих операций:



* Аналитические данные за определенную дату
  *  POST https://dataapi.kube.qwep.ru/v2/report/avg-price/date/buys-requests
     Тело запроса (JSON):
```json
{
  "parameters": {
    "date": "2023-01-01",
    "currency": "RUB",
    "status": "All"},
  "items": [
  	{
      "brand": "Mann-Filter",
	    "article": "W753"
	}
	]
}
```
date - в формате "YYYY-MM-DD";
status - Order || In stock || All;
currency - RUB || EUR; 
items - ограничение на количество до 30000 шт.

Тело ответа (JSON) https://dataapi.kube.qwep.ru/v2/report/avg-price/date/buys-requests:
```json
[
  {
    "date": "2023-01-01",
    "brand": "Mann-Filter",
    "article": "W753",
    "name": "Фильтр масляный MANN (W75/3) Renaut Logan(49729)",
    "maxavailability": 2,
    "minprice": 487.27,
    "maxprice": 487.27,
    "vendor": "AV34",
    "warehouse": "Склад",
    "status": "В наличии",
    "analyticCountReq": 287,
    "analyticCountBuy": 15
  }
]
```

## Требования

Для корректной работы сервиса необходим файл .env со следующей структурой:
```python
DB_DIALECT = '<тип базы данных, который используется>'  # например, 'mssql'
DB_DRIVER = '<драйвер, используемый для подключения к базе данных>'  # например, 'pyodbc'
DB_LOGIN = '<имя пользователя для подключения к базе данных>'
DB_PASSWORD = '<пароль для пользователя, указанного в DB_LOGIN>'
DB_SERVER = '<IP-адрес или имя сервера>'
DB_NAME = '<имя базы данных, к которой происходит подключение>'
DB_ODBC_CONNECT_DRIVER = '<ODBC-драйвер, используемый для подключения к базе данных>'  # например, 'ODBC Driver 17 for SQL Server'
DB_SCHEMA = '<Указывает схему базы данных, используемую в приложении>'  # например, 'dbo'
TOKEN = '<токен авторизации, необходимый для доступа к API>'
```